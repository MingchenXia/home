\documentclass[12pt,a4paper,notitlepage]{article}

\usepackage{amsmath,amscd,amssymb,amsthm,mathrsfs,amsfonts,layout,indentfirst,graphicx,caption,mathabx, stmaryrd,appendix,calc,imakeidx,upgreek} % mathabx for \widecheck
%\usepackage{ulem} %wave underline
\usepackage[dvipsnames]{xcolor}
\usepackage{palatino}  %template
\usepackage{slashed} % Dirac operator
\usepackage{mathrsfs} % Enable using \mathscr
%\usepackage{eufrak}  another template/font
\usepackage{extarrows} % long equal sign, \xlongequal{blablabla}
\usepackage{enumitem} % enumerate label change e.g. [label=(\alph*)]  shows (a) (b) 

\usepackage{fancyhdr} % date in footer




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% circled colon and thick colon \hcolondel and \colondel

\usepackage{pdfrender}

\newcommand*{\hollowcolon}{%
	\textpdfrender{
		TextRenderingMode=Stroke,
		LineWidth=.1bp,
	}{:}%
}

\newcommand{\hcolondel}[1]{%
	\mathopen{\hollowcolon}#1\mathclose{\hollowcolon}%
}
\newcommand{\colondel}[1]{%
	\mathopen{:}#1\mathclose{:}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%








\usepackage{tikz-cd}
\usepackage[nottoc]{tocbibind}   % Add  reference to ToC


\makeindex


% The following set up the line spaces between items in \thebibliography
\usepackage{lipsum}
\let\OLDthebibliography\thebibliography
\renewcommand\thebibliography[1]{
	\OLDthebibliography{#1}
	\setlength{\parskip}{0pt}
	\setlength{\itemsep}{2pt} 
}


\allowdisplaybreaks  %allow aligns to break between pages
\usepackage{latexsym}
\usepackage{chngcntr}
\usepackage[colorlinks,linkcolor=blue,anchorcolor=blue, linktocpage,
%pagebackref
]{hyperref}
\hypersetup{ urlcolor=cyan,
	citecolor=[rgb]{0,0.5,0}}


\setcounter{tocdepth}{1}	 %hide subsections in the content

\usepackage{fullpage}
\counterwithin{figure}{subsection}

\pagestyle{plain}

\captionsetup[figure]
{
	labelsep=none	
}













\theoremstyle{definition}
\newtheorem{df}{Definition}[section]
\newtheorem{eg}[df]{Example}
\newtheorem{exe}[df]{Exercise}
\newtheorem{rem}[df]{Remark}
\newtheorem{ass}[df]{Assumption}
\newtheorem{cv}[df]{Convention}
\newtheorem{prin}[df]{Principle}
\newtheorem{nota}[df]{Notation}
\newtheorem{st}{Step}
\newtheorem{thma}[df]{Theorem}
\newtheorem{coa}[df]{Theorem}
\theoremstyle{plain}
\newtheorem{thm}[df]{Theorem}
\newtheorem{thd}[df]{Theorem-Definition}
\newtheorem{pp}[df]{Proposition}
\newtheorem{co}[df]{Corollary}
\newtheorem{lm}[df]{Lemma}



\newtheorem{cond}{Condition}
\newtheorem{Mthm}{Main Theorem}
\renewcommand{\thecond}{\Alph{cond}} % "letter-numbered" theorems
\renewcommand{\theMthm}{\Alph{Mthm}} % "letter-numbered" theorems


%\substack   multiple lines under sum
%\underset{b}{a}   b is under a


% Remind: \overline{L_0}



\usepackage{calligra}
\DeclareMathOperator{\shom}{\mathscr{H}\text{\kern -3pt {\calligra\large om}}\,}





\newcommand{\fk}{\mathfrak}
\newcommand{\mc}{\mathcal}
\newcommand{\wtd}{\widetilde}
\newcommand{\wht}{\widehat}
\newcommand{\wch}{\widecheck}
\newcommand{\ovl}{\overline}
\newcommand{\udl}{\underline}
\newcommand{\tr}{\mathrm{t}} %transpose
\newcommand{\Tr}{\mathrm{Tr}}
\newcommand{\End}{\mathrm{End}} %endomorphism
\newcommand{\id}{\mathbf{1}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\Conf}{\mathrm{Conf}}
\newcommand{\Res}{\mathrm{Res}}
\newcommand{\KZ}{\mathrm{KZ}}
\newcommand{\ev}{\mathrm{ev}}
\newcommand{\coev}{\mathrm{coev}}
\newcommand{\opp}{\mathrm{opp}}
\newcommand{\Rep}{\mathrm{Rep}}
\newcommand{\diag}{\mathrm{diag}}
\newcommand{\Dom}{\scr D}
\newcommand{\loc}{\mathrm{loc}}
\newcommand{\con}{\mathrm{c}}
\newcommand{\uni}{\mathrm{u}}
\newcommand{\ssp}{\mathrm{ss}}
\newcommand{\di}{\slashed d}
\newcommand{\Diffp}{\mathrm{Diff}^+}
\newcommand{\Diff}{\mathrm{Diff}}
\newcommand{\PSU}{\mathrm{PSU}(1,1)}
\newcommand{\Vir}{\mathrm{Vir}}
\newcommand{\Witt}{\mathscr W}
\newcommand{\Span}{\mathrm{Span}}
\newcommand{\pri}{\mathrm{p}}
\newcommand{\ER}{E^1(V)_{\mathbb R}}
\newcommand{\bk}[1]{\langle {#1}\rangle}
\newcommand{\prth}[1]{( {#1})}
\newcommand{\bigbk}[1]{\big\langle {#1}\big\rangle}
\newcommand{\Bigbk}[1]{\Big\langle {#1}\Big\rangle}
\newcommand{\biggbk}[1]{\bigg\langle {#1}\bigg\rangle}
\newcommand{\Biggbk}[1]{\Bigg\langle {#1}\Bigg\rangle}
\newcommand{\GA}{\mathscr G_{\mathcal A}}
\newcommand{\vs}{\varsigma}
\newcommand{\Vect}{\mathrm{Vec}}
\newcommand{\Vectc}{\mathrm{Vec}^{\mathbb C}}
\newcommand{\scr}{\mathscr}
\newcommand{\sjs}{\subset\joinrel\subset}
\newcommand{\Jtd}{\widetilde{\mathcal J}}
\newcommand{\gk}{\mathfrak g}
\newcommand{\hk}{\mathfrak h}
\newcommand{\xk}{\mathfrak x}
\newcommand{\yk}{\mathfrak y}
\newcommand{\zk}{\mathfrak z}
\newcommand{\hr}{\mathfrak h_{\mathbb R}}
\newcommand{\Ad}{\mathrm{Ad}}
\newcommand{\DHR}{\mathrm{DHR}_{I_0}}
\newcommand{\Repi}{\mathrm{Rep}_{\wtd I_0}}
\newcommand{\im}{\mathbf{i}}
\newcommand{\Co}{\complement}
%\newcommand{\Cu}{\mathcal C^{\mathrm u}}
\newcommand{\RepV}{\mathrm{Rep}^\uni(V)}
\newcommand{\RepA}{\mathrm{Rep}(\mathcal A)}
\newcommand{\RepN}{\mathrm{Rep}(\mathcal N)}
\newcommand{\RepfA}{\mathrm{Rep}^{\mathrm f}(\mathcal A)}
\newcommand{\RepAU}{\mathrm{Rep}^\uni(A_U)}
\newcommand{\RepU}{\mathrm{Rep}^\uni(U)}
\newcommand{\RepL}{\mathrm{Rep}^{\mathrm{L}}}
\newcommand{\HomL}{\mathrm{Hom}^{\mathrm{L}}}
\newcommand{\EndL}{\mathrm{End}^{\mathrm{L}}}
\newcommand{\Bim}{\mathrm{Bim}}
\newcommand{\BimA}{\mathrm{Bim}^\uni(A)}
%\newcommand{\shom}{\scr Hom}
\newcommand{\divi}{\mathrm{div}}
\newcommand{\sgm}{\varsigma}
\newcommand{\SX}{{S_{\fk X}}}
\newcommand{\DX}{D_{\fk X}}
\newcommand{\mbb}{\mathbb}
\newcommand{\mbf}{\mathbf}
\newcommand{\bsb}{\boldsymbol}
\newcommand{\blt}{\bullet}
\newcommand{\coker}{\mathrm{coker}}
\newcommand{\Vbb}{\mathbb V}
\newcommand{\Ubb}{\mathbb U}
\newcommand{\Xbb}{\mathbb X}
\newcommand{\Wbb}{\mathbb W}
\newcommand{\Mbb}{\mathbb M}
\newcommand{\Gbb}{\mathbb G}
\newcommand{\Cbb}{\mathbb C}
\newcommand{\Nbb}{\mathbb N}
\newcommand{\Zbb}{\mathbb Z}
\newcommand{\Pbb}{\mathbb P}
\newcommand{\Rbb}{\mathbb R}
\newcommand{\Ebb}{\mathbb E}
\newcommand{\Dbb}{\mathbb D}
\newcommand{\Hbb}{\mathbb H}
\newcommand{\cbf}{\mathbf c}
\newcommand{\wt}{\mathrm{wt}}
\newcommand{\Lie}{\mathrm{Lie}}
\newcommand{\btl}{\blacktriangleleft}
\newcommand{\btr}{\blacktriangleright}
\newcommand{\svir}{\mathcal V\!\mathit{ir}}
\newcommand{\Ker}{\mathrm{Ker}}
\newcommand{\Coker}{\mathrm{Coker}}
\newcommand{\Sbf}{\mathbf{S}}
\newcommand{\low}{\mathrm{low}}
\newcommand{\Sp}{\mathrm{Sp}}
\newcommand{\Rng}{\mathrm{Rng}}
\newcommand{\vN}{\mathrm{vN}}
\newcommand{\Ebf}{\mathbf E}
\newcommand{\Nbf}{\mathbf N}
\newcommand{\Stb}{\mathrm {Stb}}
\newcommand{\SXb}{{S_{\fk X_b}}}
\newcommand{\pr}{\mathrm {pr}}
\newcommand{\SXtd}{S_{\wtd{\fk X}}}
\newcommand{\univ}{\mathrm {univ}}
\newcommand{\vbf}{\mathbf v}
\newcommand{\ubf}{\mathbf u}
\newcommand{\wbf}{\mathbf w}
\newcommand{\CB}{\mathrm{CB}}
\newcommand{\Perm}{\mathrm{Perm}}
\newcommand{\Orb}{\mathrm{Orb}}
\newcommand{\Lss}{{L_{0,\mathrm{s}}}}
\newcommand{\Lni}{{L_{0,\mathrm{n}}}}
\newcommand{\UPSU}{\widetilde{\mathrm{PSU}}(1,1)}
\newcommand{\Sbb}{{\mathbb S}}
\newcommand{\Gc}{\mathscr G_c}
\newcommand{\Obj}{\mathrm{Obj}}
\newcommand{\bpr}{{}^\backprime}
\newcommand{\fin}{\mathrm{fin}}
\newcommand{\Ann}{\mathbf{Ann}}
\newcommand{\Real}{\mathrm{Re}}
\newcommand{\Imag}{\mathrm{Im}}
\newcommand{\cl}{\mathrm{cl}}
\newcommand{\Ind}{\mathrm{Ind}}



\usepackage{tipa} % wierd symboles e.g. \textturnh
\newcommand{\tipar}{\text{\textrtailr}}
\newcommand{\tipaz}{\text{\textctyogh}}
\newcommand{\tipaomega}{\text{\textcloseomega}}
\newcommand{\tipae}{\text{\textrhookschwa}}
\newcommand{\tipaee}{\text{\textreve}}
\newcommand{\tipak}{\text{\texthtk}}



\usepackage{tipx}
\newcommand{\tipxgamma}{\text{\textfrtailgamma}}
\newcommand{\tipxcc}{\text{\textctstretchc}}
\newcommand{\tipxphi}{\text{\textqplig}}















\numberwithin{equation}{section}




\title{Lectures on Vertex Operator Algebras and Conformal Blocks}
\author{{\sc Bin Gui}
	%\\
	%{\small Department of Mathematics, Rutgers university}\\
	%{\small bin.gui@rutgers.edu}
}
%\date{}
\begin{document}\sloppy % avoid stretch into margins
	\pagenumbering{arabic}
	%\pagenumbering{gobble}
	%\newpage
	%\setcounter{page}{1}
	%\setcounter{section}{-1}
	%\setcounter{equation}{6}
	
	
	
	
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
\newcommand\blfootnote[1]{%
	\begingroup
	\renewcommand\thefootnote{}\footnote{#1}%
	\addtocounter{footnote}{-1}%
	\endgroup
}
% Footnote without marker

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%







%\vspace{-0.5cm}
%\blfootnote{Last major revision:  2021.6}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
%\makeatletter
%\newcommand*{\toccontents}{\@starttoc{toc}}
%\makeatother
%\toccontents

% title and table of contents same page

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\appendix

\section{Appendix: basics of sheaf theory}

The language of sheaves of modules is inevitable in the theory of conformal blocks for the following reason. The spaces of conformal blocks are expected to form a vector bundle (equivalently, locally free sheaves). This result is highly nontrivial. Moreover, we need to formulate the notion of ``forming a vector bundle" in a precise way. To accomplish this goal, we need to expand the concept of vector bundles to that of sheaves of modules.



The goal of this appendix section is to get familiar with the basic language of sheaves. The key points are the following: The equivalence of holomorphic vector bundles and locally free sheaves, the description of dual vector bundles in terms of $\scr O_X$-module morphisms, the fibers of $\scr O_X$-modules and their relationship to the fibers of vector bundles.



\subsection{(Pre)sheaves and stalks}

By definition, a \textbf{presheaf} of (complex) vector spaces $\scr F$ associated to a topological space $X$ consists of the following data: for each open $U\subset X$ there is a vector space $\scr F(U)$, and for each open $V\subset U$, there is a linear map $\scr F(U)\rightarrow\scr F(V),s\mapsto s|_V$ called the \textbf{restriction map} such that $s|_U=s$, and $(s|_V)|_W=s|_W$ for all $s\in\scr F(U)$ if $W\subset V$ is open. Elements in $\scr F(U)$ are called \textbf{sections}.

A presheaf $\scr F$ is called a \textbf{sheaf} if it satisfies:
\begin{itemize}
	\item (Locality) If  $U\subset X$ is a union $U=\bigcup_{\alpha\in\fk A}U_\alpha$ of open subsets, and if $s\in\scr F(U)$ satisfies that $s|_{U_\alpha}=0$ for each $\alpha\in\fk A$, then $s=0$.
	\item (Gluing) If $U\subset X$ is a union $U=\bigcup_{\alpha\in\fk A}U_\alpha$ of open subsets, and if for each $\alpha$ there is an element $s_\alpha\in\scr F(U_\alpha)$ such that $s_\alpha|_{U_\alpha\cap U_\beta}=s_\beta|_{U_\alpha\cap U_\beta}$ for all $\alpha,\beta\in\fk A$, then there exists $s\in \scr F(U)$ whose restriction to each $U_\alpha$ is $s_\alpha$.
\end{itemize}
We also write \index{H@$H^0(X,\scr F)=\scr F(X)$}
\begin{align}
H^0(X,\scr F)=\scr F(X),	
\end{align}
regarding the space of global sections of $\scr F$ as the $0$-th cohomology group of $\scr F$.

If $Y$ is an open subset of $X$, then the set of all $\scr F(U)$ (where $U\subset Y$) form naturally a presheaf, which we denote by $\scr F_Y$ or $\scr F|_Y$.


Let $\scr F$ be a presheaf. For each $x\in X$, we let $\scr F_x$ be the set of all sections $s\in\scr F$ defined on a neighborhood of $x$, mod the equivalence relation that two elements $s,t$ of $\scr F_x$ are regarded as equal iff $s$ equals $t$ on a possibly smaller neighborhood of $x$ inside the open sets on which $s,t$ are defined. $\scr F_x$ is called the \textbf{stalk} of $\scr F$ at $x$, and elements in $\scr F_x$ are called \textbf{germs}. For each $s\in\scr F$ defined near $x$, the corresponding germ at $x$ is denoted by $s_x$. \index{F@$\scr F_x,s_x$, stalks and germs.}


\begin{rem}
	It is easy to see that the presheaf $\scr F$ satisfies locality iff the following holds: for every open $U\subset X$ and section $s\in\scr F(U)$, $s=0$ iff $s_x=0$ for all $x\in U$.
\end{rem}



\subsection{Sheafification}
We are not interested in presheaves that are not sheaves. And each presheaf $\scr F_0$ can be made a sheaf $\scr F$ through the following procedure called \textbf{sheafification}: 

For each open $U\subset X$, let $\scr F_1(U)$ be the set of all $s:=(s_\alpha)_{\alpha\in\fk A}$ where $(U_\alpha)_{\alpha\in\fk A}$ is an open cover of $U$, and $s_{\alpha_1,x}=s_{\alpha_2,x}$ for all $\alpha_1,\alpha_2\in\fk A$ and $x\in U_{\alpha_1}\cap U_{\alpha_2}$. $\scr F(U)$ is $\scr F_1(U)$ mod the following relation: let $(V_\beta)_{\beta\in\fk B}$ be another open cover. Then $s:=(s_\alpha)_{\alpha\in\fk A}$ and $t:=(t_\beta)_{\beta\in\fk B}$ are regarded equal iff $s_{\alpha,x}=t_{\beta,x}$ for all $\alpha\in\fk A$, $\beta\in\fk B$, and $x\in U_\alpha\cap V_\beta$. The linear combinations of $s$ and $t$ can be defined easily by replacing $(U_\alpha)_{\alpha\in\fk A}$ and $(V_\beta)_{\beta\in\fk B}$ by a common finer open cover, e.g. $(U_\alpha\cap V_\beta)_{\alpha\in\fk A,\beta\in\fk B}$.


Note that the stalk $(\scr F_0)_x$ can be naturally identified with that of the sheafification $\scr F_x$.


\subsection{(Pre)sheaves of modules and morphisms}

We now let $X$ be a complex manifold. Then all $\scr O(U)$ (where $U\subset X$ is open) form the sheaf $\scr O_X$ of holomorphic functions on $X$, called the \textbf{structure sheaf} of $X$.

\begin{eg}
Let $U\subset\Cbb^m$ be open. Then the stalk $\scr O_{U,0}=\scr O_{\Cbb^m,0}$ can be identified with the $\Cbb$-subalgebra of elements of $\Cbb[[z_1,\dots,z_m]]$ converging absolutely on an open ball centered at $0$.
\end{eg}

A \textbf{(pre)sheaf of $\scr O_X$-modules} $\scr F$ is a (pre)sheaf such that each $\scr F(U)$ is an $\scr O(U)$-module, and that for each open $V\subset U$, the restriction map $s\in\scr F(U)\mapsto s|_V\in\scr F(V)$ intertwines the actions of $\scr O(U)$, i.e., $(fs)|_V=f|_V\cdot s|_V$ for all $f\in\scr O(U)$. A sheaf of $\scr O_X$-modules is simply called an \textbf{$\scr O_X$-module}.


A \textbf{morphism of (resp. presheaves of) $\scr O_X$-modules} $\varphi:\scr E\rightarrow\scr F$ gives each open $U\subset X$ an $\scr O(U)$-module morphism $\varphi_U:\scr E(U)\rightarrow\scr F(U)$ that is compatible with the restriction to open subsets: if $V\subset U$ is open and $s\in\scr E(U)$ then $\varphi_U(s)|_V=\varphi_V(s|_V)$.  



\begin{cv}
	We abbreviate each $\varphi_U(s)$ to $\varphi(s)$. So $\varphi(s|_V)=\varphi(s)|_V$.
\end{cv}


\begin{rem}
	Note that the stalk $\scr O_{X,x}$ of $\scr O_X$ at $x$ is a $\Cbb$-algebra. A morphism $\varphi:\scr E\rightarrow\scr F$ naturally gives an  $\scr O_{X,x}$-module morphism $\varphi_x:\scr E_x\rightarrow\scr F_x$. 
	
	Also, there is a natural $\scr O_X$-module morphism $\scr E^s\rightarrow\scr F^s$ where $\scr E^s$ and $\scr F^s$ are the sheafifications of $\scr E$ and $\scr F$. The corresponding stalk morphism $\varphi_x:\scr E^s_x\rightarrow\scr F^s_x$ agrees with $\varphi_x:\scr E_x\rightarrow\scr F_x$.
\end{rem}


\begin{eg}
	Any (holomorphic) vector bundle $\scr F$ \footnote{Unless otherwise stated, all vector bundles are holomorphic with finite ranks.} over $X$ is an $\scr O_X$-module. 
\end{eg}


\begin{eg}
	If $W$ is a finite dimensional  vector space, let $W\otimes_\Cbb\scr O_X$ be the presheaf whose space of sections on each open $U\subset X$ is $W\otimes_\Cbb\scr O(U)$. Then $W\otimes_\Cbb\scr O_X$ is naturally a sheaf, and hence an $\scr O_X$-module. It is regarded as the trivial vector bundle with fiber $W$. We often suppress the subscript $\Cbb$ in $W\otimes_\Cbb\scr O_X$.
	
When $W$ is infinite-dimensional, the above defined presheaf is not a sheaf since the gluing property does not hold  when considering an open subset $U\subset X$ that has infinitely many connected components. 	 We let $W\otimes_\Cbb\scr O_X$ denote the sheafification of this presheaf. Then $(W\otimes_\Cbb\scr O_X)(U)$ equals $W\otimes\scr O(U)$ if $U$ is connected, or more generally, iff $U$ has finitely many connected components. Thus, we have a natural isomorphism of $\scr O_{X,x}$-modules
\begin{align*}
(W\otimes\scr O_X)_x\simeq W\otimes\scr O_{X,x}.	
\end{align*}

Note that when $U$ is connected, elements of $W\otimes\scr O(U)$ can be viewed as holomorphic functions from $U$ to a finite-dimensional subspace of $W$. We shall call such sections \textbf{$W$-valued holomorphic functions}. \index{00@$W$-valued holomorphic functions} \hfill\qedsymbol
\end{eg}

\begin{cv}\label{lb103}
	The space of $\scr O_X$-module morphisms $\varphi:\scr E\rightarrow\scr F$ form a vector space, which is clearly an $\scr O(X)$-module such that $f\in\scr O(X)$ times $\varphi$ is $f\varphi$, sending each $s\in \scr E(U)$ (where $U\subset X$ is open) to $f|_U\cdot \varphi(s)$. We denote this $\scr O(X)$-module by $\Hom_{\scr O_X}(\scr E,\scr F)$. \index{HomEF@$\Hom_{\scr O_X}(\scr E,\scr F)$}
\end{cv}



\begin{eg}\label{lb104}
	Let $V,W$ be finite dimensional vector spaces. A morphism 
	\begin{align*}
		\varphi:V\otimes\scr O_X\rightarrow W\otimes\scr O_X	
	\end{align*}
	is equivalently a $\Hom(V,W)$-valued holomorphic function $\Phi$ on $X$. Indeed, choose basis $\{e_i\}$ of $V$ and $\{f_j\}$ of $W^*$. Identify each vector of $W$ as a constant section of $W\otimes\scr O(X)$. Then $\varphi(e_i)\in W\otimes\scr O(X)$, and $\Phi$  is a matrix-valued holomorphic function whose $(j,i)$-component is the function $x\mapsto\bk{f_j,\varphi(e_i)(x)}$.
	
	To summarize, we have a canonical isomorphism of $\scr O(X)$-modules
	\begin{align*}
		\Hom_{\scr O_X}(V\otimes\scr O_X,W\otimes\scr O_X)\simeq \Hom_\Cbb(V,W)\otimes\scr O(X).	
	\end{align*}
	\hfill\qedsymbol
\end{eg}




\subsection{Injectivity, surjectivity, isomorphisms}

An $\scr O_X$-module morphism $\varphi:\scr E\rightarrow\scr F$ is called \textbf{injective} resp. \textbf{surjective} if for each $x\in X$ the corresponding stalk morphism $\varphi_x:\scr E_x\rightarrow\scr F_x$ is injective resp. surjective.

\begin{exe}
	Show that $\varphi$ is injective if $\varphi:\scr E(U)\rightarrow\scr F(U)$ is injective for all open $U\subset X$. Show that $\varphi$ is surjective iff for each $x\in X$ and each section $t\in\scr F$ on a neighborhood $U$ of $X$, by shrinking $U$ to a smaller neighborhood $V\ni x$, we can find $s\in\scr E(V)$ such that $\varphi(s)=t$ when restricted to $V$.
\end{exe}


(Warning: surjectivity does not mean that each $x$ is contained in a neighborhood $U$ such that $\varphi:\scr E(U)\rightarrow\scr F(U)$ is surjective. Thus, surjectivity of sheaves is defined both locally and sectionwisely!)



\begin{rem}\label{lb102}
	Let $\scr E,\scr F$ be presheaves of $\scr O_X$-modules. Suppose that each $\scr E(U)$ is an $\scr O(U)$-submodule of $\scr F(U)$, and the inclusion maps $\scr E(U)\hookrightarrow\scr F(U)$ are compatible with the restriction maps of sheaves. Then there is a natural  morphism $\iota:\scr E\rightarrow\scr F$ such that $\iota_U$ is the inclusion $\scr E(U)\hookrightarrow\scr F(U)$. We say that $\scr E$ is a \textbf{sub-presheaf of $\scr O_X$-modules}  of $\scr F$. If both $\scr E,\scr F$ are sheaves, we say $\scr E$ is an \textbf{$\scr O_X$-submodule} of $\scr F$.
	
	Now suppose $\scr F$ is an $\scr O_X$-modules and $\scr E$ is a sub-presheaf of $\scr O_X$-modules of $\scr F$. Then the sheafification of $\scr E$ can be viewed as an $\scr O_X$-submodule of $\scr F$. Its spaces of sections are all $s\in\scr F(U)$ such that $s_x\in\scr E_x$ for every $x\in U$. \hfill\qedsymbol
\end{rem}

We say that an $\scr O_X$-module morphism $\varphi:\scr E\rightarrow\scr F$ is an \textbf{isomorphism of $\scr O_X$-modules} if it is bijective (i.e. injective+surjective). 
\begin{exe}
	Show that $\varphi$ is an isomorphism if and only if for each open subset $U\subset X$, $\varphi_U:\scr E(U)\rightarrow\scr F(U)$ is an isomorphism of $\scr O(U)$-modules. (Indeed, the only nontrivial part is to show that $\varphi$ being an isomorphism implies the surjectivity of $\varphi_U$. Surprisingly, to prove this part we need the injectivity!) 
\end{exe}


\subsection{Kernals, cokernels, images}


Let $\varphi:\scr E\rightarrow\scr F$ be an $\scr O_X$-module morphism. The \textbf{kernel} $\Ker(\varphi)$ is the presheaf whose space of sections on any open subset $U$ is the kernel of $\varphi:\scr E(U)\rightarrow\scr F$. It is clear that $\Ker(\varphi)$ is a sheaf and is an $\scr O_X$-module. Clearly $\Ker(\varphi)_x$ is the kernel of the stalk map $\varphi:\scr E_x\rightarrow\scr F_x$.

The \textbf{image} $\varphi(\scr E)=\Imag(\varphi)$ is the sheafification of the presheaf whose space of sections on each $U$ is $\varphi(\scr E(U))$.


The \textbf{cokeral} $\Coker(\varphi)$ is the sheafification of the presheaf whose space of sections on each $U$ is $\scr F(U)/\varphi(\scr E(U))$. Equivalently, $\Coker(\varphi)$ is the sheafification of the presheaf whose space of sections on each $U$ is $\scr F(U)/\varphi(\scr E)(U)$. Thus, we also say that $\Coker(\varphi)$ is the \textbf{quotient} of the sheaves $\scr F$ and $\varphi(\scr E)$, and write
\begin{align}
\scr F/\varphi(\scr E)=\coker(\varphi).	
\end{align}



\begin{rem}
	Show that we have natural equivalences
	\begin{gather}
		\varphi(\scr E)_x\simeq\varphi(\scr E_x),\\
		\Coker(\varphi)_x	\simeq \scr F_x/\varphi(\scr E_x).
	\end{gather}
\end{rem}


\subsection{Locally free sheaves}


Let $I$ be an index set. Let $\Cbb^I$ be the direct sum of  $|I|$ copies of $\Cbb$ indexed by elements of $I$. Then $\Cbb^I$ has basis $\{e_i\}_{i\in I}$ where $e_i$ is the vector whose only non-zero component is the $i$-th one, which is $1$.

Let $\scr E$ be an $\scr O_X$-module. A collection of sections $(s_i)_{i\in I}\subset\scr E(X)$ is said to \textbf{generate} (resp. \textbf{generate freely}) $\scr E$ if the natural $\scr O_X$-module $\psi:\Cbb^I\otimes\scr O_X\rightarrow\scr E$ sending each $e_i$ (regarded as a constant section $e_i\otimes 1$) to $s_i$ is surjective (resp. bijective).

Equivalently, $(s_i)_{i\in I}$ generates (resp. generates freely) $\scr E$ iff for each $x\in X$, each $t\in\scr E_x$ can be written as a (resp. unique) $\scr O_{X,x}$-linear combination of the germs $(s_{i,x})_{i\in I}$.

If $U\subset X$ is open, we say $(s_i)_{i\in I}$ generates (resp. freely) $\scr E_U$ if $(s_i|_U)_{i\in I}$ does.

We say that $\scr E$ is \textbf{locally free} if each $x\in X$ is contained in a neighborhood $U$ such that the following equivalent conditions hold:
\begin{itemize}
	\item $\scr E_U$ is generated freely by finitely many sections $s_1,\dots,s_n\in\scr E(U)$. ($s_\blt$ play the role of basis of a vector space.)
	\item $\scr E_U$ is isomorphic to $\Cbb^n\otimes\scr O_U$ for some $n\in\Nbb$. 
\end{itemize}








\begin{rem}\label{lb105}
	It is an important fact that locally free $\scr O_X$-modules are the same as holomorphic vector bundles. Indeed, the sections of vector bundles clearly form a locally free module. Conversely, suppose $\scr E$ is locally free, then we can get a vector bundle whose transition functions are $\psi\circ\varphi^{-1}:W\otimes\scr O_U\xrightarrow{\simeq}W\otimes\scr O_U$ (considered as $\End W$-valued holomorphic functions) where $\varphi,\psi:\scr E\xrightarrow{\simeq} W\otimes\scr O_U$ are trivializations. Equivalently, if $s_1,\dots,s_n$ and $t_1,\dots,t_n$ both generate freely $\scr E_U$, then there is a unique invertible $M_{n\times n}(\Cbb)$-valued holomorphic function $A$ such that $t_i(x)=\sum_j A_{i,j}(x)s_j(x)$. Then $A$ gives a transition function.
\end{rem}


\subsection{Sheaves of morphisms, dual modules}


If $\scr E,\scr F$ are $\scr O_X$-modules, we have a presheaf $\scr G$ whose space of sections on each open $U\subset X$ is $\Hom_{\scr O_U}(\scr E_U,\scr F_U)$. There is an obvious restriction map from $\Hom_{\scr O_U}(\scr E_U,\scr F_U)$ to $\Hom_{\scr O_V}(\scr E_V,\scr F_V)$ if $V\subset U$ is open. $\scr G$ is clearly a presheaf of $\scr O_X$-modules. It is a routine check that $\scr G$ is a sheaf. We denote this sheaf of $\scr O_X$-modules by
\begin{align*}
	\shom_{\scr O_X}(\scr E,\scr F).	
\end{align*}

\begin{exe}
	Find a natural equivalence $\scr F\xrightarrow{\simeq}\shom_{\scr O_X}(\scr O_X,\scr F)$.
\end{exe}

\begin{eg}
	In the setting of Example \ref{lb104}, we have a natural $\scr O_X$-module isomorphism
	\begin{align}
		\shom_{\scr O_X}(V\otimes\scr O_X,W\otimes\scr O_X)\simeq \Hom_\Cbb(V,W)\otimes\scr O_X.	\label{eq181}
	\end{align}
\end{eg}

We define
\begin{align*}
	\scr E^\vee:=\shom_{\scr O_X}(\scr E,\scr O_X),
\end{align*}
called the \textbf{dual $\scr O_X$-module} of $\scr E$. Then by \eqref{eq181}, if $\scr E$ is locally free (i.e., a vector bundle), then so is $\scr E^\vee$, and they have the same rank. We regard $\scr E$ as the \textbf{dual vector bundle} of $\scr E$.


\begin{exe}
Let $\scr E$ be an $\scr O_X$-submodule of $\scr F$. Show that $(\scr F/\scr E)^\vee$ is the sheaf whose sections over any open  $U\subset X$ are the $\scr O_U$-module morphisms $\scr F_U\rightarrow\scr O_U$ vanishing on the stalks of $\scr E_U$.
\end{exe}

\begin{cv}
If $U,V\subset X$ are open, $\varphi\in\Hom_{\scr O_V}(\scr E_V,\scr O_V)$ and $s\in\scr E(U)$, we set
\begin{align*}
\bk{\varphi,s}=\varphi(s|_{U\cap V})\qquad (\in\scr O(U\cap V)).	
\end{align*} 
\end{cv}


\begin{rem}
If $\scr E$ is a vector bundle, then the transition functions of $\scr E^\vee$ are the inverses of those of $\scr E$. To see this, choose $s_1,\dots,s_n\in\scr E(U)$ generating freely $\scr E_U$. Then by $\scr E_U\simeq\Cbb^n\otimes\scr O_U$, we can easily find $\wch s_1,\dots,\wch s_n\in\scr E^\vee(U)$ generating freely $\scr E^\vee_U$ such that $\bk{s_j,s_i}$ is the constant section $\delta_{i,j}$. $\wch s_1,\dots,\wch s_n$ are regarded as the dual basis of  $s_1,\dots,s_n$. 

Now, if $t_1,\dots,t_n\in\scr E(U)$ also generates freely $\scr E_U$, then by Rem. \ref{lb105}, the matrix valued holomorphic function $A\in M_{n\times n}\otimes\scr O(U)$ such that $t_i=\sum_j A_{i,j}s_j$ is a transition function of $\scr E$. Let $A^{-1}\in M_{n\times n}\otimes\scr O(U)$ be the function sending $x\in U$ to $A(x)^{-1}$. Then $\wch t_i=\sum_j (A^{-1})_{i,j}\wch s_j$. \hfill\qedsymbol
\end{rem}






\subsection{Fibers}

One can recover the fibers from a locally free sheaf in the following way. Let us consider a general $\scr O_X$-module $\scr E$. For each $x\in X$, let $\fk m_{X,x}$ (or simply $\fk m_x$) \index{mx@$\fk m_{X,x}\equiv\fk m_x$} be the ideal of $\scr O_{X,x}$ consisting of all $s\in\scr O_{X,x}$ whose values at $x$ vanish. Then $\fk m_x\scr E_x$ is an $\scr O_{X,x}$-submodule of $\scr E_x$, and so is the \textbf{fiber} \index{Ex@$\scr E\lvert x=\scr E\lvert_x,s(x)$}
\begin{align}
\scr E|x\equiv\scr E|_x=\frac{\scr E_x}{\fk m_x\scr E_x}.
\end{align} 
The equivalence class of $s\in\scr E_x$ in $\scr E|x$ is denoted by $s(x)$, called the value of $s$ on the fiber $\scr E|x$.

If $\varphi:\scr E\rightarrow\scr F$ is an $\scr O_X$-module morphism and $x\in X$, then $\varphi:\scr E_x\rightarrow\scr F_x$ descends to a linear map
\begin{align}
	\varphi:\scr E|x\rightarrow\scr F|x	
\end{align}
since $\varphi(\fk m_x\scr E_x)=\fk m_x\varphi(\scr E_x)\subset\fk m_x\scr F_x$. 

\begin{eg}
Let $U\ni 0$ be an open subset of $\Cbb^m$. Then $\fk m_{U,0}$ is the set of all series $\sum_{n_1,\dots,n_m\in \Nbb}a_{n_1,\dots,n_m}z_1^{n_1}\cdots z_m^{n_m}$ converging absolutely near $0$ such that $a_{0,\dots,0}=0$. Equivalently,
\begin{align*}
\fk m_{\Cbb^m,0}=z_1\scr O_{\Cbb^m,0}+\cdots+z_m\scr O_{\Cbb^m,0}.	
\end{align*}
\end{eg}

\begin{exe}
Let $W$ be a vector space, and let $\scr E=W\otimes\scr O_U$ where $U\subset\Cbb^m$. Let $x\in U$.  Show that the evaluation map
\begin{align}
(W\otimes\scr O_U)_x\rightarrow W, \qquad w\otimes f\mapsto f(x)w.	
\end{align}
descends to an isomorphism of vector spaces $(W\otimes\scr O_X)\big|x\simeq W$.
\end{exe}














\end{document}










%%%%%%%%%%%%%%%%




